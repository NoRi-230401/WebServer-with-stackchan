<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>StackChan</title>
  <base target="StackChanSub">
  <!-- comment -->
  <meta name="author" content="NoRi-230811">
  <meta name="content-language" content="ja">
  <meta name="build" content="2023-08-01">
</head>

<body bgcolor="#fffacd" text="#2f4f4f" leftmargin="10" topmargin="20">
  <a name="top"></a>
  <font size="3">Welcome to</font><br>
  <font color="87ceeb" size="5"><b>　WebServer-with-stackchan　(WSS)</b></font><br>

  <hr color="#87ceeb" width="100%" size="3">
  <br>
  <a href="http://192.168.0.100/" target="Home">０.Home</a><br>
  <a href="#kihon">１.基本操作</a><br>
  <a href="#chatgpt">２.chatGPT（ロール設定とTTS）</a><br>

  <a href="#inst">３.インストール手順</a><br>
  <a href="#kantan">４.簡単設定</a><br>
  <a href="#startup">５.スタートアップ設定</a><br>
  <a href="#wifiSelect">６.Wifi設定</a><br>
  <a href="#info">７.ApiKey取得と情報（リンク）</a><br>
  <a href="#hajime">８.はじめに読んでください。</a><br>
  <br>
  <b>★応答に時間がかかるので動作中であれば停止してください。</b><br>
  　　<a href="http://192.168.0.100/randomSpeak?mode=off">「独り言」停止</a>
  　　<a href="http://192.168.0.100/timer?mode=Stop">「タイマー」停止</a>
  <br><br>
  <p>
    SPIFFSの "wsWifi.json","wsApikey.json" のファイルは、<br>
    破損に備えて<b>必ずバックアップを取ってください。</b><br>
    [ Home ] 画面の　DownloadでファイルをPCに保存することができます。<br>
  </p>
  <br>
  <a href="#top">トップ</a>　<a href="http://192.168.0.100/sysInfo"">システム情報</a>　<a
    href=" http://192.168.0.100/startup"">wsStartup.json</a>
  　<a href="http://192.168.0.100/servoSetting">wsServo.json</a>
  　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>
  <br><br>
  <hr color="#87ceeb" width="100%" size="3">

  <h4><a name="kihon"></a>★１. 基本操作</h4>

  <form action="http://192.168.0.100/setting" method="get">
    音量( 0 - 255 )：<input type="text" name="volume" value="200" size="3" maxlength="3" />　<input type="submit"
      value="送信" />
  </form>
  <br>

  「独り言」 ：　<a href="http://192.168.0.100/randomSpeak?mode=on">開始</a>
  　　<a href="http://192.168.0.100/randomSpeak?mode=off">停止</a>
  <br><br>
  <form action="http://192.168.0.100/setting?" method="get">vSpeakerNo:話者番号(0-66)　<input type="text" name="speaker"
      value="3" size="2" maxlength="2" />　 <input type="submit" value="送信" />
  </form>
  <br>

  <form action="http://192.168.0.100/timer" method="get">
    タイマー時間設定(30-3599秒)：<input type="text" name="setTime" value="180" size="5" maxlength="5" />　　<input type="submit"
      value="送信" />　30秒～60分未満
  </form>

  <br>
  タイマー開始/停止：　<a href="http://192.168.0.100/timer?mode=Go">開始</a>
  　　<a href="http://192.168.0.100/timer?mode=Stop">停止</a>
  <br>

  <br>
  LEDのON/OFF：　<a href="http://192.168.0.100/setting?led=on">LED_ON</a>
  　　<a href="http://192.168.0.100/setting?led=off">LED_OFF</a>
  <br><br>

  toneMode(0-3):　<a href="http://192.168.0.100/setting?toneMode=0">0:無音</a>
  　<a href="http://192.168.0.100/setting?toneMode=1">1:ボタン押下</a>
  　<a href="http://192.168.0.100/setting?toneMode=2">2:コマンド受信</a>
  　<a href="http://192.168.0.100/setting?toneMode=3">3:両方</a>
  <br><br>

  音声ミュート：　<a href="http://192.168.0.100/setting?mute=on">ミュートON(無音) </a>
  　　<a href="http://192.168.0.100/setting?mute=off">ミュートOFF（有音）</a>
  <br><br>

  KEYロック：　<a href="http://192.168.0.100/setting?keyLock=on">ロックON (ボタン操作無効) </a>
  　　<a href="http://192.168.0.100/setting?keyLock=off">ロックOFF（ボタン操作有効）</a>
  <br><br>
  終了/再起動：　<a href="http://192.168.0.100/shutdown">「終了」を実行</a>
  　　<a href="http://192.168.0.100/shutdown?reboot=on">「再起動」を実行</a>
  <br><br>
  表情：<a href="http://192.168.0.100/face?expression=0">0:普通</a>
  　<a href="http://192.168.0.100/face?expression=1">1:楽しい</a>
  　<a href="http://192.168.0.100/face?expression=2">2:眠い</a>
  　<a href="http://192.168.0.100/face?expression=3">3:怪しい</a>
  　<a href="http://192.168.0.100/face?expression=4">4:悲しい</a>
  　<a href="http://192.168.0.100/face?expression=5">5:怒り</a>
  <br>

  <br>
  <form action="http://192.168.0.100/speech" method="get">
    <p>
      <b>セリフ（発声）</b>： テキスト入力<br>
      <textarea rows="6" cols="60" name="say" wrap="soft"></textarea><br>
      vSpeakerNo:話者番号:( 0-66 ) 　<input type="text" name="voice" value="" size="2" maxlength="2" /><br>
      表情(0-5)：<input type="text" name="expression" value="0" size="1" maxlength="1" />　上の「表情」番号を入力<br>
      <input type="submit" value="送信" />
    </p>
  </form>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/startup">wsStartup.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br><br>
  <hr>
  <h4><a name="chatgpt"></a>★２.chatGPT　(ロール設定とTTS)</h4>

  <p>
  <h3>　chatGPT</h3>
  　テキストを入力してAIと会話してください。<br>
  <form action="http://192.168.0.100/chat" method="get">
    <textarea rows="6" cols="60" name="text" wrap="soft"> </textarea><br>
    vSpeakerNo:話者番号(0-66)　　<input type="text" name="voice" value="1" size="2" maxlength="2" />
    <br>
    <input type="submit" value="送信" />
  </form>
  </p>
  <br>
  <p>
  <h3>※　ロール設定</h3>
  <p>chatGPTのロール設定の確認と変更ができます。<br><br>
    <a href="http://192.168.0.100/role_get">ロール設定の確認</a>
    <br><br>
  <form action="http://192.168.0.100/role_set" method="post">
    <label for="textarea">ロール設定の変更　（何も入力しないとロール情報は消去されます。）</label><br>
    <textarea id="role_textarea" name="textarea" rows="6" cols="60"></textarea><br>
    <input type="submit" value="送信">
  </form>
  </p>
  <br>


  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/apikey">wsApikey.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>
  <br>
  <br>
  <hr>
  <h4> <a name="inst"></a> ★３.インストール手順</h4>
  <p>
    （０）以前に「AiStackChan2」を利用している場合には、SD上の wifi.txt　と apikey.txt を利用することができます。<br>
    電源を入れるとファイル情報を使い接続し、wsWifi.json, wsApiKey.json 設定を自動的に反映します。
    <br>
    　→　電源を入れて、顔が表示されたら（４）に移動してください。<br>
    <br><br>

    （１）～（３）は、まだ、wifiの接続が出来ていない場合です。<br><br>

    （１）．<a
      href="https://github.com/NoRi-230401/WebServer-with-stackchan">GitHubで提供しているソフト</a>(WebServer-with-stackchan)の「INSTALL」ファルダ内のファイル<br>
    を全てPCにコピーしてください。<br>
    　設定には、wsWifi.json　とファイルを使用します。<br>
    <br>
    （２）．テキストエディタで、次の箇所を自分用に書き換える<br>
    　・　wsWifi.json の [ssid]、[passwd]<br>
    <br>
    （３）．SD直下に wsWifi.json フォイルをコピーしてください。<br>
    その後、電源を入れ 本体に顔が表示されたらWifiの接続は成功です。<br><br>
    <br><br>
    （４）．PCのWEBアドレス入力欄に、ServerName　(初期値は、"stackchan") <br>
    　（例１）<a href="http://stackchan/">http://stackchan/</a> <br><br>
    　または、ブート時に表示されるIPアドレスを入力<br>
    　（例２）http://192.168.0.100/　 <br>
    <br>
    （５）．PCの画面に「 [Home] stackchan ip=xxx.xxx.xxx.xxx 」が表示されていればPCとの接続成功<br>
    次の　<b>「★４．簡単設定」</b>　に移動し、残りの設定をします。<br>


  </p>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/apikey">wsApikey.json</a>
  　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br>
  <hr>
  <h4> <a name="kantan"></a> ★４.簡単設定</h4>
  　Apikeyの設定または変更、および基本の設定ができます。<br>
  <br>
  <form action="http://192.168.0.100/apikey" method="get">openAiApiKey　：<input type="text" name="openAiApiKey" value=""
      size="55" maxlength="60" />　<input type="submit" value="送信" />
  </form>
  <br>
  <form action="http://192.168.0.100/apikey" method="get">voicevoxApiKey：<input type="text" name="voicevoxApiKey"
      value="" size="20" maxlength="30" />　<input type="submit" value="送信" />
  </form>
  <br>
  servo　 ：　<a href="http://192.168.0.100/servoSetting?servo=on">on</a>
  　　<a href="http://192.168.0.100/servoSetting?servo=off">off</a>
  <br><br>
  servoPort：　<a href="http://192.168.0.100/servoSetting?servoPort=portA">portA</a>
  　　<a href="http://192.168.0.100/servoSetting?servoPort=portC">portC</a>
  <br><br>

  <p><b>wsApiKey.jsonとwsServo.jsonの確認と変更を反映させるに再起動してください。</b> </p>
  <br>
  <a href="#top">トップ</a>　<a href="http://192.168.0.100/sysInfo">システム情報</a>　
  　<a href="http://192.168.0.100/apikey">wsApikey.json</a>
  　<a href="http://192.168.0.100/servoSetting">wsServo.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>
  <br>
  <br>
  <hr>
  <h4><a name="startup"></a> ★５.スタートアップ設定</h4>
  起動時に設定ファイル("wsStartup.Json")を読み込み設定が反映されます。<br>
  ここでは、ファイルの内容を書き換えます。変更を反映するには、再起動が必要です。<br>
  "-1" または、 "***" は、 最後に設定された状態を維持となります。

  <br>
  <br>
  <form action="http://192.168.0.100/startup" method="get">
    serverName：<input type="text" name="serverName" value="" size="20" maxlength="20" />　<input type="submit"
      value="送信" />
  </form>
  <br>
  <form action="http://192.168.0.100/startup" method="get">
    volume：( -1 to 255 )、-1は状態維持：<input type="text" name="volume" value="-1" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
  <br>
  led：　<a href="http://192.168.0.100/startup?led=on">on</a>
  　　<a href="http://192.168.0.100/startup?led=off">off</a>
  　　<a href="http://192.168.0.100/startup?led=***">状態維持</a>
  <br><br>
  toneMode(0-3):　<a href="http://192.168.0.100/startup?toneMode=0">0:無音</a>
  　<a href="http://192.168.0.100/startup?toneMode=1">1:ボタン押下</a>
  　<a href="http://192.168.0.100/startup?toneMode=2">2:コマンド受信</a>
  　<a href="http://192.168.0.100/startup?toneMode=3">3:両方</a>
  　<a href="http://192.168.0.100/startup?toneMode=-1">-1:状態維持</a>
  <br><br>
  mute：　<a href="http://192.168.0.100/startup?mute=on">on</a>
  　　<a href="http://192.168.0.100/startup?mute=off">off</a>
  <br><br>
  keyLock：　<a href="http://192.168.0.100/startup?keyLock=on">on</a>
  　　<a href="http://192.168.0.100/startup?keyLock=off">off</a>
  <br><br>
  <form action="http://192.168.0.100/startup" method="get">
    vSpeakerNo : 話者番号( -1 to 66) -1は状態維持：<input type="text" name="vSpeakerNo" value="-1" size="2" maxlength="2" />　<input
      type="submit" value="送信" />
  </form>
  <br>
  randomSpeak：　<a href="http://192.168.0.100/startup?randomSpeak=on">on</a>
  　　<a href="http://192.168.0.100/startup?randomSpeak=off">off</a>
  <br><br>
  <form action="http://192.168.0.100/startup" method="get">
    timer(30-3599)：<input type="text" name="timer" value="180" size="3" maxlength="3" />　　　　　<input type="submit"
      value="送信" />　30秒～60分未満　-1:状態維持
  </form>
  <br><br><br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/startup">wsStartup.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br>
  <br>
  <hr>
  <h4><a name="wifiSelect"></a>★６. Wifi設定（複数AP, DHCP/固定IP対応）</h4>
  <p>
    複数のアクセスポイント（AP）情報を登録できます。<br>
    DHCP接続の場合には、ssid-passwd の２つの情報が必要。<br>
    固定IP接続の場合は、ssid-passwd-ip-gateway-subnet の５つ、<br>
    または、dns情報を含めた６つの情報の登録が必要となります。<br>
  </p>

  <p>
    登録後の設定を反映するには、再起動が必要です。<br>
    先に登録したAPの順（0から開始）に接続を試み登録した全てのAPを試します。<br>
    全てが失敗した場合には、以前接続したWiFi情報を使用し接続を試します。<br>
    それも失敗したら、最後にSmartConfig接続を試みます。<br>
  </p>
  <br>
  <b>アクセスポイント(AP)の追加</b><br>
  <form action="http://192.168.0.100/wifiSelect" method="get">ssid　　：<input type="text" name="ssid" value="" size="40"
      maxlength="60" action="http://192.168.0.100/wifiSelect" method="get"><br>passwd ：<input type="text" name="passwd"
      value="" size="40" maxlength="60" action="http://192.168.0.100/wifiSelect" method="get"><br>ip　　　：<input
      type="text" name="ip" value="" size="20" maxlength="20" action="http://192.168.0.100/wifiSelect"
      method="get">(xxx.xxx.xxx.xxx)の書式<br>gateway：<input type="text" name="gateway" value="" size="20" maxlength="20"
      action="http://192.168.0.100/wifiSelect" method="get"><br>subnet ：<input type="text" name="subnet" value=""
      size="20" maxlength="20" action="http://192.168.0.100/wifiSelect" method="get"><br>dns　　：<input type="text"
      name="dns" value="" size="20" maxlength="20" />　　　<input type="submit" value="送信" />
  </form>
  <br><br>
  <form action="http://192.168.0.100/wifiSelect" method="get">
    AP削除：<input type="text" name="remove" value="" size="1" maxlength="1" />　番号を入力、（ 0 が最優先のAP番号）<br>
    　<input type="submit" value="送信" />
  </form>
  <br>
  <a href="http://192.168.0.100/wifiSelect?init=on">設定を初期化（全削除）</a>　-最初から作成する場合-
  <br>
  <br>
  <b>最後に必ず、下の「wsWifi.json」で確認してください。</b>
  <br><br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br><br>
  <hr>
  <h3><a name="info"></a>★７. ApiKey取得と情報（リンク）</h4>
  <h4>[ ApiKey ]</h4>
  OpenAI と VOICEVOXのApiKeyの取得が必要となります。<br>
  下記のリンクを参考にしてApiKeyを取得してください。<br><br>
  　<a href="https://openai.com/">OpenAI</a><br>
  　<a href="https://qiita.com/mikito/items/b69f38c54b362c20e9e6">ChatGPT API利用方法の簡単解説</a><br>
  　<a href="https://voicevox.hiroshiba.jp/">VOICEVOX</a><br>
  　<a href="https://su-shiki.com/api/">VOICEVOX用API取得</a><br>
  <br>

  <h4>[ WebServer-with-stackchan ]</h4>
  
  　<a href="https://github.com/NoRi-230401/WebServer-with-stackchan">WebServer-with-stackchan(GitHub)</a>
  <br>
  　<a href="https://drive.google.com/drive/u/1/folders/1xljoYIRUaAEwy3630j6imzLtksO6ecvg">サンプル等のファイル置場(GoogleDrive)</a>
  <br>
  　<a href="https://nori230401.blogspot.com/">「プログラマー日記」: 私のブログです</a>
  <br><br>
  

 <h4> [ 参考ソフト ]</h4>
 　<a href="https://github.com/me-no-dev/ESPAsyncWebServer">ESPAsysncWebServer</a><br>
 　<a href="https://github.com/G6EJD/G6EJD-ESP-File-Server">ESP-File-Server</a><br>
 　<a href="https://github.com/NoRi-230401/AiStackChanEx">AiStackChanEx(旧ソフト)</a><br>
 　<a href="https://github.com/robo8080/AI_StackChan2/">AI_StackChan2</a><br>
  <br>
  <h3> [ サーボ関連 ]</h3>
  　<a href="https://github.com/mongonta0716/stack-chan-tester/">stack-chan-tester</a><br>
  　<a href="https://raspberrypi.mongonta.com/how-to-move-with-sg90-arduinoframework/">「M５スタック沼人ノニッキ」</a><br>
  　<a href="https://note.com/ku_nel_5/n/n8c57b19884bd/">「電子工作素人によるスタックチャン製作記４」</a>
  <br><br>

  <h4> [ Twitter ]</h4>
  　<a
    href="https://twitter.com/hashtag/%EF%BD%BD%EF%BE%80%EF%BD%AF%EF%BD%B8%EF%BE%81%EF%BD%AC%EF%BE%9D?src=hashtag_click/">＃ｽﾀｯｸﾁｬﾝ</a>　　<a
    href="https://twitter.com/hashtag/AI%EF%BD%BD%EF%BE%80%EF%BD%AF%EF%BD%B8%EF%BE%81%EF%BD%AC%EF%BE%9D?src=hashtag_click/">＃AIｽﾀｯｸﾁｬﾝ</a><br>
  <br>
  <br>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>　<a href="http://192.168.0.100/startup">wsStartup.json</a>　<a
    href="http://192.168.0.100/apikey">wsApikey.json</a>　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a
    href="http://192.168.0.100/shutdown?reboot=on">再起動</a>


  <br><br>
  <hr>
  <h3><a name="hajime"></a>★８.はじめに読んでください。</h4>
  <h4>[ ソフトウエアの特徴 ]</h4>
  
  <br>
  <br>
  <br>
 
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>　<a href="http://192.168.0.100/startup">wsStartup.json</a>　<a
    href="http://192.168.0.100/apikey">wsApikey.json</a>　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a
    href="http://192.168.0.100/shutdown?reboot=on">再起動</a>


  <br><br>
  <hr>


  <br><br><br><br><br><br><br><br><br>
</body>

</html>