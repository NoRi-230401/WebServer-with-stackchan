<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>Setting</title>
  <base target="StackChanSub">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    html {
      font-size: 62.5%;
    }

    body {
      margin: 1%;
      text-align: left;
      width: 98%;
      background: #fffacd;
      font-size: 1.6rem;
    }

    div {
      line-height: 120%;
      text-align: left;
      font-size: 1.5rem;
      font-weight: normal;
    }

    p {
      line-height: 120%;
      font-size: 1.5rem;
      width: 100%;
      margin: 0%
    }

    h1 {
      text-align: center;
      margin: 0%;
      line-height: 110%;
      color: #87ceeb;
      font-size: 2.8rem;
      font-weight: bolder;
    }

    h2 {
      text-align: left;
      margin: 2%;
      line-height: 150%;
      font-size: 2.0rem;
      font-weight: bold;
    }

    h3 {
      line-height: 110%;
      font-size: 2.0rem;
      font-weight: bold;
    }

    h4 {
      line-height: 110%;
      font-size: 1.5rem;
      font-weight: bold;
    }

    h5 {
      line-height: 110%;
      font-size: 1.5rem;
      font-weight: normal;
    }

    @media screen and (max-width: 480px) {
      img {
        width: 100%;
        height: auto;
      }

      body {
        font-size: 1.4rem;
      }

      div {
        font-size: 1.4rem;
      }

      p {
        font-size: 1.4rem;
      }

      h5 {
        font-size: 1.4rem;
      }
    }
  </style>

</head>

<!-- <body bgcolor="#fffacd" text="#2f4f4f" leftmargin="10" topmargin="20"> -->

<body>
  <a name="top"></a>
  <br>
  <h1>Setting</h1>
  <br>
  <hr color="#87ceeb" width="100%" size="3">
  <br>
  <a href="http://192.168.0.100/" target="Home">０.Home</a><br>
  <a href="#kihon">１.基本操作</a><br>
  <a href="#chatgpt">２.chatGPT</a><br>
  <a href="#inst">３.インストール手順</a><br>
  <a href="#kantan">４.簡単設定</a><br>
  <a href="#startup">５.スタートアップ設定</a><br>
  <a href="#wifiSelect">６.Wifi設定</a><br>
  <a href="#info">７.ApiKey取得と情報（リンク）</a><br>
  <a href="#hajime">８.はじめに読んでください。</a><br>
  <br>
  <b>★応答に時間がかかるので動作中であれば停止してください。</b><br>
  　　<a href="http://192.168.0.100/randomSpeak?mode=off">「独り言」停止</a>
  　　<a href="http://192.168.0.100/timer?mode=Stop">「タイマー」停止</a>
  <br><br>
  <p>
    "wsWifi.json","wsApikey.json" のファイルは、破損に備えて<b>必ずバックアップを取ってください。</b><br>
    [ Home ] 画面の　DownloadでファイルをPCに保存することができます。<br>
  </p>
  <br>
  <a href="#top">トップ</a>　<a href="http://192.168.0.100/sysInfo"">システム情報</a>　<a
    href=" http://192.168.0.100/startup"">wsStartup.json</a>
  　<a href="http://192.168.0.100/servoSetting">wsServo.json</a>
  　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>
  <br><br>
  <hr color="#87ceeb" width="100%" size="3">

  <a name="kihon"></a>
  <br>
  <h2>★１. 基本操作</h2>

  <form action="http://192.168.0.100/setting" method="get">
    音量( 0 - 255 )：<input type="text" name="volume" value="200" size="3" maxlength="3" />　<input type="submit"
      value="送信" />
  </form>
  <br>

  「独り言」 ：　<a href="http://192.168.0.100/randomSpeak?mode=on">開始</a>
  　　<a href="http://192.168.0.100/randomSpeak?mode=off">停止</a>
  <br><br>
  <form action="http://192.168.0.100/setting?" method="get">vSpeakerNo:話者番号(0-66)　<input type="text" name="vSpeakerNo"
      value="3" size="2" maxlength="2" />　 <input type="submit" value="送信" />
  </form>
  <br>

  <form action="http://192.168.0.100/timer" method="get">
    タイマー時間設定(30秒-60分未満)<br>
    　<input type="text" name="setTimeMin" value="" size="2" maxlength="2" />分
    　<input type="text" name="setTimeSec" value="0" size="2" maxlength="2" />秒　　<input type="submit" value="送信" />
  </form>

  <br>
  タイマー開始/停止：　<a href="http://192.168.0.100/timer?mode=Go">開始</a>
  　　<a href="http://192.168.0.100/timer?mode=Stop">停止</a>
  <br>

  <br>
  LEDのON/OFF：　<a href="http://192.168.0.100/setting?led=on">LED_ON</a>
  　　<a href="http://192.168.0.100/setting?led=off">LED_OFF</a>
  <br><br>

  toneMode(0-3):<br>
  <a href="http://192.168.0.100/setting?toneMode=0">0:無音</a>
  　<a href="http://192.168.0.100/setting?toneMode=1">1:ボタン押下</a>
  　<a href="http://192.168.0.100/setting?toneMode=2">2:コマンド受信</a>
  　<a href="http://192.168.0.100/setting?toneMode=3">3:両方</a>
  <br><br>

  音声ミュート：　<a href="http://192.168.0.100/setting?mute=on">MuteOn(無音) </a>
  　　<a href="http://192.168.0.100/setting?mute=off">MuteOff（有音）</a>
  <br><br>

  KEYロック：　<a href="http://192.168.0.100/setting?keyLock=on">On (操作無効) </a>
  　　<a href="http://192.168.0.100/setting?keyLock=off">Off（操作有効）</a>
  <br><br>
  終了/再起動：　<a href="http://192.168.0.100/shutdown">「終了」実行</a>
  　　<a href="http://192.168.0.100/shutdown?reboot=on">「再起動」実行</a>
  <br><br>
  表情：<br>
  　<a href="http://192.168.0.100/face?expression=0">0:普通</a>
  　<a href="http://192.168.0.100/face?expression=1">1:楽しい</a>
  　<a href="http://192.168.0.100/face?expression=2">2:眠い</a>
  <br>
  　<a href="http://192.168.0.100/face?expression=3">3:怪しい</a>
  　<a href="http://192.168.0.100/face?expression=4">4:悲しい</a>
  　<a href="http://192.168.0.100/face?expression=5">5:怒り</a>
  <br>

  <br>
  <form action="http://192.168.0.100/speech" method="get">
    <p>
      <b>セリフ（発声）</b>： テキスト入力<br>
      <textarea rows="6" cols="40" name="say" wrap="soft"></textarea><br>
      vSpeakerNo:話者番号:( 0-66 ) 　<input type="text" name="voice" value="" size="2" maxlength="2" /><br>
      表情(0-5)：<input type="text" name="expression" value="0" size="1" maxlength="1" />　上の「表情」番号を入力<br>
      <input type="submit" value="送信" />
    </p>
  </form>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/startup">wsStartup.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br><br>
  <hr>
  <a name="chatgpt"></a>
  <br>
  <h2>★２.chatGPT</h2>


  テキストを入力してAIと会話してください。<br>
  <div>
    <form action="http://192.168.0.100/chat" method="get">
      <textarea rows="6" cols="40" name="text" wrap="soft"> </textarea><br>
      vSpeakerNo:話者番号(0-66)　　<input type="text" name="voice" value="1" size="2" maxlength="2" />
      <br>
      <input type="submit" value="送信" />
    </form>
  </div>
  <br>

  <h4>ロール設定</h4>
  chatGPTのロール設定の確認と変更ができます。<br><br>
  <p>
    <a href="http://192.168.0.100/role_get">ロールの確認</a>
  </p>
  <br>
  <p>
  <form action="http://192.168.0.100/role_set" method="post">
    <label for="textarea">ロールの変更:<br>
      　何も入力しないとロール情報は消去されます。　</label><br>
    <textarea id="role_textarea" name="textarea" rows="10" cols="40"></textarea><br>
    <input type="submit" value="送信">
  </form>
  </p>
  <br>


  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/apikey">wsApikey.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>
  <br>
  <br>
  <hr>
  <a name="inst"></a>
  <br>
  <h2>★３.インストール手順</h2>

  <p>
  <h4>（１）．ファイルをPCにコピー</h4>
  <a
    href="https://github.com/NoRi-230401/WebServer-with-stackchan">GitHubで提供しているソフト</a>(WebServer-with-stackchan)の「SPIFFS0」ファルダ内のファイル<br>
  を全てPCにコピーしてください。<br>
  <br>
  </p>


  <p>
  <h4>「AiStackChan2」使用ありの場合：（２）実施</h4>

  <h4>（２）SD上の wifi.txt　と apikey.txt を利用します。</h4>
  電源を入れると自動的に SPIFFS領域にwsWifi.json, wsApiKey.jsonを作成し反映します。
  <br>
  　電源を入れて、顔が表示されたらWifiの接続は成功です。<br>
  <b>　→　（５）に進む</b><br>
  </p>
  <br><br>

  <h4>その他の場合：（３）（４）実施</h4>
  <p>
  <h4>（３）．wsWifi.jsonファイルの準備</h4>
  （１）でダウンロードしたファイルのうち、wsWifi.json　を使用します。<br>
  　PCのテキストエディタで、次の箇所を自分用に書き換える<br>
  　・　wsWifi.json の [ssid]、[passwd]<br><br>
  </p>

  <p>
  <h4>（４）．SD直下に wsWifi.json ファイルをコピー</h4>
  その後、電源を入れ 本体に顔が表示されたらWifiの接続は成功です。<br><br>
  </p>

  <p>
  <h4>（５）．ホーム画面にアクセス</h4>
  PCのWEBアドレス入力欄に、ServerNameを入力　(初期値は、"stackchan") <br>
  　（例１）<a href="http://stackchan/">http://stackchan/</a> <br><br>
  　または、電源投入時に表示されるIPアドレスを入力<br>
  　（例２）http://192.168.0.100/　 <br>
  <br>
  </p>

  <p>
  <h4>（６）．PCの画面下にホーム画面が表される</h4>
  画面下に「 [Home] stackchan IP=xxx.xxx.xxx.xxx 」が表示されていればPCとの接続成功です。<br><br>
  </p>

  <p>
  <h4>（７）．SPIFFS領域にファイルをアップロード</h4>
  ホーム画面のファイル管理機能をつかって、PCからファイルをアップロードします。<br>
  （１）でダウンロードした「SPIFF0」フォルダ内の次の５つのファイル<br>
  (wss1.html, 　wss2.html, 　wss3.html,　style.css,　script.js,　icon.gif)<br>
  を次の手順で本体のSPIFFS領域にアップロードします。<br><br>
  　Upload ->　「参照」　 ->　 「upload」
  </p>
  <br>

  <p>
  <h4>（８）．ApiKeyとサーボ等の設定</h4>
  画面上部の「Setting」項目を選択すると、設定画面が開きます（この画面）<br>
  「★４．簡単設定」の項目に移動して残りの設定を行ってくだささい。
  </p>


  <br><br>

  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/apikey">wsApikey.json</a>
  　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br><br>
  <hr><br>
  <a name="kantan"></a>
  <h2>★４.簡単設定</h2>
  　Apikeyの設定または変更、および基本の設定ができます。<br>
  <br>
  <form action="http://192.168.0.100/apikey" method="get">openAiApiKey：<br>
    <input type="text" name="openAiApiKey" value="" size="40" maxlength="60" />　<input type="submit" value="送信" />
  </form>
  <br>
  <form action="http://192.168.0.100/apikey" method="get">voicevoxApiKey：<input type="text" name="voicevoxApiKey"
      value="" size="20" maxlength="30" />　　<input type="submit" value="送信" />
  </form>
  <br>
  servo　 ：　<a href="http://192.168.0.100/servoSetting?servo=on">on</a>
  　　<a href="http://192.168.0.100/servoSetting?servo=off">off</a>
  <br><br>
  servoPort：　<a href="http://192.168.0.100/servoSetting?servoPort=portA">portA</a>
  　　<a href="http://192.168.0.100/servoSetting?servoPort=portC">portC</a>
  <br><br>

  <p>wsApiKey.jsonとwsServo.jsonの内容を確認し、再起動してください。</p>
  <br><br>
  <a href="#top">トップ</a>　<a href="http://192.168.0.100/sysInfo">システム情報</a>　
  　<a href="http://192.168.0.100/apikey">wsApikey.json</a>
  　<a href="http://192.168.0.100/servoSetting">wsServo.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>
  <br>
  <br>
  <hr>

  <a name="startup"></a>
  <br>
  <h2>★５.スタートアップ設定</h2>
  起動時に設定ファイル("wsStartup.Json")を読み込み設定が反映されます。<br>
  ここでは、ファイルの内容を書き換えます。変更を反映するには、再起動が必要です。<br>
  "-1" または、 "***" は、 最後に設定された状態を維持となります。

  <br>
  <br>
  <form action="http://192.168.0.100/startup" method="get">
    serverName：<input type="text" name="serverName" value="" size="20" maxlength="20" />　<input type="submit"
      value="送信" />
  </form>
  <br>
  <form action="http://192.168.0.100/startup" method="get">
    volume：( -1 to 255 )、-1は状態維持：<input type="text" name="volume" value="-1" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
  <br>
  led：　<a href="http://192.168.0.100/startup?led=on">on</a>
  　　<a href="http://192.168.0.100/startup?led=off">off</a>
  　　<a href="http://192.168.0.100/startup?led=***">状態維持</a>
  <br><br>
  toneMode(0-3):<br>
  　<a href="http://192.168.0.100/startup?toneMode=0">0:無音</a>
  　　<a href="http://192.168.0.100/startup?toneMode=1">1:ボタン押下</a>
  　　<a href="http://192.168.0.100/startup?toneMode=2">2:コマンド受信</a><br>
  　<a href="http://192.168.0.100/startup?toneMode=3">3:両方</a>
  　　<a href="http://192.168.0.100/startup?toneMode=-1">-1:状態維持</a>
  <br><br>
  mute：　<a href="http://192.168.0.100/startup?mute=on">on</a>
  　　<a href="http://192.168.0.100/startup?mute=off">off</a>
  <br><br>
  keyLock：　<a href="http://192.168.0.100/startup?keyLock=on">on</a>
  　　<a href="http://192.168.0.100/startup?keyLock=off">off</a>
  <br><br>
  <form action="http://192.168.0.100/startup" method="get">
    vSpeakerNo : 話者番号( -1 to 66) -1は状態維持<br>
    　<input type="text" name="vSpeakerNo" value="-1" size="2" maxlength="2" />　　<input type="submit" value="送信" />
  </form>
  <br>
  randomSpeak：　<a href="http://192.168.0.100/startup?randomSpeak=on">on</a>
  　　<a href="http://192.168.0.100/startup?randomSpeak=off">off</a>
  <br><br>
  <form action="http://192.168.0.100/startup" method="get">
    timer(30-3599Sec, -1)：<input type="text" name="timer" value="180" size="3" maxlength="3" />　　　　　<input type="submit"
      value="送信" /><br>
    　30秒～60分未満　-1:状態維持
  </form>
  <br><br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/startup">wsStartup.json</a>
  　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br>
  <br>
  <hr>
  <a name="wifiSelect"></a>
  <br>
  <h2>★６. Wifi設定（複数AP, DHCP/固定IP対応）</h2>

  <p>
    複数のアクセスポイント（AP）情報を登録できます。<br>
    DHCP接続の場合には、ssid-passwd の２つの情報が必要。<br>
    固定IP接続の場合は、ssid-passwd-ip-gateway-subnet の５つ、<br>
    または、dns情報を含めた６つの情報の登録が必要となります。<br>
  </p>
  <br>

  <p>
    登録後の設定を反映するには、再起動が必要です。<br>
    先に登録したAPの順（0から開始）に接続を試み登録した全てのAPを試します。<br>
    全てが失敗した場合には、以前接続したWiFi情報を使用し接続を試します。<br>
    それも失敗したら、最後にSmartConfig接続を試みます。<br>
  </p>
  <br>
  <b>アクセスポイント(AP)の追加</b><br>
  <form action="http://192.168.0.100/wifiSelect" method="get">ssid　　：<input type="text" name="ssid" value="" size="40"
      maxlength="60" action="http://192.168.0.100/wifiSelect" method="get"><br>passwd ：<input type="text" name="passwd"
      value="" size="40" maxlength="60" action="http://192.168.0.100/wifiSelect" method="get"><br>ip　　　：<input
      type="text" name="ip" value="" size="20" maxlength="20" action="http://192.168.0.100/wifiSelect"
      method="get">(xxx.xxx.xxx.xxx)の書式<br>gateway：<input type="text" name="gateway" value="" size="20" maxlength="20"
      action="http://192.168.0.100/wifiSelect" method="get"><br>subnet ：<input type="text" name="subnet" value=""
      size="20" maxlength="20" action="http://192.168.0.100/wifiSelect" method="get"><br>dns　　：<input type="text"
      name="dns" value="" size="20" maxlength="20" />　　　<input type="submit" value="送信" />
  </form>
  <br><br>
  <form action="http://192.168.0.100/wifiSelect" method="get">
    AP削除：<input type="text" name="remove" value="" size="1" maxlength="1" />　削除する番号を入力<br>
    （ 0 が最優先のAP番号）　<input type="submit" value="送信" />
  </form>
  <br>
  <a href="http://192.168.0.100/wifiSelect?init=on">設定を初期化（全削除）</a>　※最初から作成する場合
  <br>
  <br>
  <b>設定後、下の「wsWifi.json」で確認してください。</b>
  <br><br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>
  　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a href="http://192.168.0.100/shutdown?reboot=on">再起動</a>

  <br><br>
  <hr>

  <a name="info"></a>
  <br>
  <h2>★７. ApiKey取得と情報（リンク）</h2>
  <h5>[ ApiKey ]</h5>
  OpenAI と VOICEVOXのApiKeyの取得が必要となります。<br>
  下記のリンクを参考にしてApiKeyを取得してください。<br><br>
  　<a href="https://openai.com/">OpenAI</a><br>
  　<a href="https://qiita.com/mikito/items/b69f38c54b362c20e9e6">ChatGPT API利用方法の簡単解説</a><br>
  　<a href="https://voicevox.hiroshiba.jp/">VOICEVOX</a><br>
  　<a href="https://su-shiki.com/api/">VOICEVOX用API取得</a><br>
  <br>

  <h5>[ WebServer-with-stackchan ]</h5>

  　<a href="https://github.com/NoRi-230401/WebServer-with-stackchan">WebServer-with-stackchan(GitHub)</a>
  <br>
  　<a href="https://drive.google.com/drive/u/1/folders/1xljoYIRUaAEwy3630j6imzLtksO6ecvg">サンプル等のファイル置場(GoogleDrive)</a>
  <br>
  　<a href="https://nori230401.blogspot.com/">「プログラマー日記」: 私のブログです</a>
  <br><br>


  <h5> [ 参考ソフト ]</h5>
  　<a href="https://github.com/me-no-dev/ESPAsyncWebServer">ESPAsysncWebServer</a><br>
  　<a href="https://github.com/G6EJD/G6EJD-ESP-File-Server">ESP-File-Server</a><br>
  　<a href="https://github.com/NoRi-230401/AiStackChanEx">AiStackChanEx(旧ソフト)</a><br>
  　<a href="https://github.com/robo8080/AI_StackChan2/">AI_StackChan2</a><br>
  <br>
  <h5> [ サーボ関連 ]</h5>
  　<a href="https://github.com/mongonta0716/stack-chan-tester/">stack-chan-tester</a><br>
  　<a href="https://raspberrypi.mongonta.com/how-to-move-with-sg90-arduinoframework/">「M５スタック沼人ノニッキ」</a><br>
  　<a href="https://note.com/ku_nel_5/n/n8c57b19884bd/">「電子工作素人によるスタックチャン製作記４」</a>
  <br><br>

  <h5> [ Twitter ]</h5>
  　<a
    href="https://twitter.com/hashtag/%EF%BD%BD%EF%BE%80%EF%BD%AF%EF%BD%B8%EF%BE%81%EF%BD%AC%EF%BE%9D?src=hashtag_click/">＃ｽﾀｯｸﾁｬﾝ</a>　　<a
    href="https://twitter.com/hashtag/AI%EF%BD%BD%EF%BE%80%EF%BD%AF%EF%BD%B8%EF%BE%81%EF%BD%AC%EF%BE%9D?src=hashtag_click/">＃AIｽﾀｯｸﾁｬﾝ</a><br>
  <br>
  <br>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>　<a href="http://192.168.0.100/startup">wsStartup.json</a>　<a
    href="http://192.168.0.100/apikey">wsApikey.json</a>　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a
    href="http://192.168.0.100/shutdown?reboot=on">再起動</a>


  <br><br>
  <hr>
  <a name="hajime"></a>
  <br>
  <h2>★８.はじめに読んでください。</h2>
  <h5>[ ソフトウエアの特徴 ]</h5>

  <br>
  <br>
  <br>

  <a href="#top">トップ</a>
  　<a href="http://192.168.0.100/sysInfo">システム情報</a>　<a href="http://192.168.0.100/startup">wsStartup.json</a>　<a
    href="http://192.168.0.100/apikey">wsApikey.json</a>　<a href="http://192.168.0.100/wifiSelect">wsWifi.json</a>　<a
    href="http://192.168.0.100/shutdown?reboot=on">再起動</a>


  <br><br>
  <hr>


  <br><br><br><br><br><br><br><br><br>
</body>

</html>